# /worklog - 작업 완료 자동화 스킬

**모든 작업 완료 시 자동으로 실행되어야 하는 스킬입니다.**

## 자동 실행 조건

다음 상황에서 이 스킬을 **반드시** 실행:
1. 사용자 요청에 대한 작업 완료 시
2. 코드 변경이 발생한 경우
3. 문서 변경이 발생한 경우
4. PR 생성/업데이트 후

## 워크플로우

### 1단계: 토큰 통계 수집 (필수!)
```bash
npx ccusage session --json
```

**중요**: 각 작업별로 통계를 기록해야 함
- 현재 세션의 총 토큰/비용 확인
- 이전 작업 기록과 비교하여 이번 작업 사용량 계산 (delta)
- 입력/출력/캐시 토큰 구분해서 기록

### 2단계: workLog 파일 업데이트

**파일 경로**: `workLog/YYYY-MM-DD.md`

**작업별 통계 테이블 (필수!)**:
```markdown
### #N - 작업 제목
| 통계 | 값 |
|------|-----|
| 시각 | YYYY-MM-DD HH:MM |
| 입력 토큰 | X,XXX |
| 출력 토큰 | X,XXX |
| 캐시 생성 | X,XXX |
| 캐시 읽기 | X,XXX,XXX |
| 총 토큰 | X,XXX,XXX |
| 비용 | $X.XX |

- **요청 내용**: 사용자가 요청한 내용 요약
- **작업 내용**:
  - 수행한 작업 1
  - 수행한 작업 2
- **변화**:
  ```
  [NEW] 새로 생성된 파일
  [MODIFIED] 수정된 파일
  ```
- **브랜치**: 현재 브랜치명
```

### 3단계: 세션 통계 업데이트
파일 상단의 세션 통계 테이블 업데이트:
```markdown
## 세션 통계 요약
| 항목 | 값 |
|------|-----|
| 총 요청 수 | N |
| 총 토큰 | X,XXX,XXX |
| 총 비용 | $XX.XX |
```

### 4단계: 커밋 및 푸시
```bash
# 모든 변경사항 스테이징
git add .

# 커밋
git commit -m "$(cat <<'EOF'
타입: 작업 설명

- 상세 내용

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
EOF
)"

# 푸시
git push
```

## 작업별 통계 계산 방법

1. **작업 시작 시점**: 이전 작업의 누적 토큰 기억 (또는 세션 시작이면 0)
2. **작업 완료 시점**: `npx ccusage session --json` 실행
3. **델타 계산**: (현재 누적) - (이전 누적) = 이번 작업 사용량

## 체크리스트

작업 완료 전 확인:
- [ ] 작업별 토큰 통계 기록 (입력/출력/캐시/총합/비용)
- [ ] 세션 통계 테이블 업데이트
- [ ] 변경 파일 목록 기록
- [ ] git commit 완료
- [ ] git push 완료

## 주의사항

- **절대 빠뜨리지 말 것** - 모든 작업 후 반드시 실행
- **통계를 빈약하게 적지 말 것** - 토큰, 비용 상세히 기록
- 이미 기록된 요청 번호 중복 주의
